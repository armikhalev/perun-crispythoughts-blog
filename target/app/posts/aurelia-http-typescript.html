<!DOCTYPE html>
<html itemtype="http://schema.org/Blog" lang="en"><head><link href="../index.css" rel="stylesheet" type="text/css"><link href="../autumn.css" rel="stylesheet" type="text/css"><title>CT | Aurelia http-fetch-client and TypeScript</title><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"><link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet"></head><body class="main"><h1 class="main-header">Aurelia http-fetch-client and TypeScript</h1><main class="content"><p>To make Aurelia get http-fetch-client plugin to work with TypeSript, all you need is:</p>
<p>(Assuming use of node.js) – Get plugin with the following command in the console: <code>npm install aurelia-fetch-client whatwg-fetch --save</code></p>
<p>– In ‘aurelia.json’ file add ‘aurelia-fetch-client’  to “dependencies” block.</p>
<p>Then use it like this in any model-view .ts file:</p>
<pre><code class="highlight"><span></span><span class="kr">import</span> <span class="p">{</span><span class="nx">inject</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'aurelia-framework'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">HttpClient</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'aurelia-fetch-client'</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">class</span> <span class="nx">App</span> <span class="p">{</span>

  <span class="nx">root</span> <span class="o">=</span> <span class="s1">'https://jsonplaceholder.typicode.com/'</span><span class="p">;</span>
  <span class="nx">http</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HttpClient</span><span class="p">();</span>
  <span class="nx">data</span><span class="p">;</span>
  <span class="kr">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">getSomeJson() {</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">root</span><span class="o">+</span><span class="s1">'users'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">d</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">address</span><span class="p">.</span><span class="nx">city</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>– Then to render it in template, here the basic usage:</p>
<pre><code class="highlight"><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"button-bar"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn btn-success"</span><span class="p">&gt;</span>Get json<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>${data}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</code></pre>
<p>In some outdated guides for the same procedure you would find that you need to install special @typings for this to make it work with TypeScript, however, it is not the case by now, you simply use this plugin as if you use it for ESNext.</p>
<p>Happy coding!</p>
</main><h2><a class="back-home" href="/">↢ Back Home</a></h2><footer><div>Built by Sen Mikhalev with: </div><span><a href="https://github.com/clojure/clojurescript">Clojure(Script)</a></span><span>, </span><span><a href="https://github.com/hashobject/perun">Perun</a></span><span>, </span><span><a href="https://github.com/boot-clj/boot">Boot</a></span><span>, </span><span><a href="https://github.com/noprompt/garden">Garden</a></span><span> and </span><span><a href="https://github.com/plumatic/dommy">Dommy</a></span></footer></body></html>